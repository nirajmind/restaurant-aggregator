# aggregator-app/src/main/resources/application.yml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/restaurant_db
    username: postgres
    password: postgres
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate.jdbc.time_zone: UTC
      hibernate.default_batch_fetch_size: 100
      hibernate.order_updates: true
  flyway:
    enabled: true
    locations: classpath:db/migration
  cache:
    type: redis
  data:
    redis:
      host: ${VARIABLE:default}
      port: 6379




server:
  port: 8080

management:
  endpoints:
    web:
      exposure:
        include: health, info, metrics, prometheus

app:
  ingestion:
    dedup:
      similarityThreshold: 0.92
  demo-user:
    username: testUser
    password: ${DEMO_PASSWORD:password123}

jwt:
  # If JWT_SECRET is missing (e.g. local unit tests), use a default insecure key
  secret: ${JWT_SECRET:404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970}
  expiration: 86400000 # 24 hours